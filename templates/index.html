{{template "base.html" .}}

{{define "title"}}タスク一覧 - タスク管理システム{{end}}

{{define "content"}}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>タスク一覧</h2>
    <a href="/create" class="btn btn-primary">新しいタスクを作成</a>
</div>

{{if .Tasks}}
<div class="row">
    {{range .Tasks}}
    <div class="col-md-6 col-lg-4 mb-3">
        <div class="card {{if .Completed}}border-success{{else}}border-warning{{end}}">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h6 class="card-title mb-0">{{.Title}}</h6>
                <span class="badge {{if .Completed}}bg-success{{else}}bg-warning text-dark{{end}}">
                    {{if .Completed}}完了{{else}}未完了{{end}}
                </span>
            </div>
            <div class="card-body">
                <p class="card-text">
                    <small class="text-muted">期限: {{.Deadline.Format "2006/01/02 15:04"}}</small>
                </p>
                <div class="d-flex justify-content-between">
                    <button type="button" class="btn btn-info btn-sm" onclick="showTaskDetail({{.ID}})">
                        詳細を見る
                    </button>
                    {{if not .Completed}}
                    <button type="button" class="btn btn-success btn-sm" onclick="toggleTaskStatus({{.ID}}, true)">
                        完了にする
                    </button>
                    {{else}}
                    <button type="button" class="btn btn-warning btn-sm" onclick="toggleTaskStatus({{.ID}}, false)">
                        未完了にする
                    </button>
                    {{end}}
                </div>
            </div>
        </div>
    </div>
    {{end}}
</div>
{{else}}
<div class="alert alert-info" role="alert">
    <h4 class="alert-heading">タスクがありません</h4>
    <p>まだタスクが登録されていません。新しいタスクを作成してください。</p>
    <hr>
    <a class="btn btn-primary" href="/create">最初のタスクを作成する</a>
</div>
{{end}}
{{end}}